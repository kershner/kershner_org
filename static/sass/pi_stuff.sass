// =============================================================================
// RESET & BASE
// =============================================================================
*
  margin: 0
  padding: 0
  box-sizing: border-box

html, body
  width: 100%
  height: 100%
  overflow: hidden
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif

// =============================================================================
// VARIABLES
// =============================================================================
// Colors - Base
$border-color: rgba(255, 255, 255, 0.3)
$border-color-hover: rgba(255, 255, 255, 0.6)
$background-color: rgba(255, 255, 255, 0.15)
$background-color-hover: rgba(255, 255, 255, 0.2)
$background-dark: rgba(0, 0, 0, 0.9)
$text-color: white
$text-color-inverted: black
$text-color-dimmed: rgba(255, 255, 255, 0.5)

// Colors - States
$success-bg: rgba(76, 175, 80, 0.2)
$success-border: rgba(76, 175, 80, 0.5)
$success-text: #81c784

$error-bg: rgba(244, 67, 54, 0.2)
$error-border: rgba(244, 67, 54, 0.5)
$error-text: #e57373

// Colors - Search specific
$search-bg: rgba(0, 0, 0, 0.95)
$search-border: rgba(255, 255, 255, 0.2)
$search-item-hover: rgba(255, 255, 255, 0.1)
$search-item-selected: rgba(255, 255, 255, 0.15)

// Spacing
$border-radius: 4px
$spacing-sm: 0.5rem
$spacing-md: 1rem
$spacing-lg: 1.5rem

// =============================================================================
// GLOBAL SCROLLBAR STYLES
// =============================================================================
// Firefox
*
  scrollbar-width: thin
  scrollbar-color: rgba(255, 255, 255, 0.15) transparent

// WebKit (Chrome, Safari, Edge)
::-webkit-scrollbar
  width: 6px
  height: 6px

::-webkit-scrollbar-track
  background: transparent

::-webkit-scrollbar-thumb
  background: rgba(255, 255, 255, 0.15)
  border-radius: 4px

  &:hover
    background: rgba(255, 255, 255, 0.25)

// =============================================================================
// MIXINS
// =============================================================================
@mixin button-base
  padding: 1.5em
  font-size: 1em
  background: $background-color
  color: $text-color
  border: 1px solid $border-color
  border-radius: $border-radius
  cursor: pointer

@mixin button-alt
  background: $background-dark

@mixin active-scale
  &:active
    transform: scale(0.95)

@mixin flex-center
  display: flex
  justify-content: center
  align-items: center

@mixin text-truncate
  overflow: hidden
  text-overflow: ellipsis
  white-space: nowrap

// =============================================================================
// HOME PAGE - PLAYER & MENU
// =============================================================================
#player-container
  width: 100%
  height: 100%
  position: relative

#player
  width: 100%
  height: 100%

#player-overlay
  position: absolute
  top: 25%
  left: 0
  width: 100%
  height: 50%
  z-index: 10
  cursor: pointer

#player-overlay-left,
#player-overlay-right
  position: absolute
  top: 25%
  width: 33.33%
  height: 50%
  z-index: 10
  cursor: pointer

#player-overlay-left
  left: 0

#player-overlay-right
  right: 0

.menu-button
  position: fixed
  top: 0
  left: 0
  width: 10em
  height: 10em
  background: transparent
  border: 0
  z-index: 11

.menu
  position: fixed
  z-index: 11
  inset: 0
  @include flex-center
  background: $background-dark

  &[hidden]
    display: none

.menu-inner
  display: flex
  flex-direction: column
  justify-content: space-between
  padding: $spacing-sm 0
  height: 100%
  width: 60rem
  max-width: 100%

.menu-header,
.menu-footer
  flex: 0 0 auto
  min-width: 0

.menu-actions
  display: flex
  gap: $spacing-sm

  button
    @include button-alt
    flex: 1
    font-weight: bold

.menu-categories
  display: flex
  justify-content: space-between
  gap: $spacing-sm
  padding: $spacing-sm 0
  min-width: 0
  
  button
    flex: 0 0 auto
    padding: 0.75rem 1rem
    font-weight: bold

  .random-btn
    button
      @include button-alt

  .category-btns
    display: flex
    flex-wrap: nowrap
    gap: $spacing-sm
    flex: 1
    min-width: 0
    overflow-x: auto
    
    button
      white-space: nowrap

.menu-content
  flex: 1 1 auto
  display: flex
  position: relative
  overflow-y: auto
  border-top: 2px solid $border-color
  min-height: 0

.menu-playlists
  display: flex
  flex-wrap: wrap
  align-items: flex-start
  align-content: flex-start
  gap: $spacing-sm
  padding: $spacing-sm 0
  overflow-y: auto
  flex: 1

  &[hidden]
    display: none

.menu-qr
  width: 100%

  &[hidden]
    display: none

.qr-box
  @include flex-center
  padding: $spacing-md
  flex-direction: column
  gap: 0.5rem

.qr-img
  padding: 0
  max-width: 40vh
  border: 4px solid $border-color
  border-radius: 8px
  background: transparent
  
  img
    display: block
    width: 100%
    height: auto

.menu-footer
  padding-top: $spacing-sm

// Screen off state
body.screen-off
  background: black

  #player
    visibility: hidden

  &::before
    content: ''
    position: fixed
    inset: 0
    background: black
    z-index: 1
    pointer-events: none

// =============================================================================
// DISPLAY MESSAGE
// =============================================================================
@keyframes fadeInScale
  from
    opacity: 0
    transform: translate(-50%, -50%) scale(0.9)
  to
    opacity: 1
    transform: translate(-50%, -50%) scale(1)

.display-message
  position: fixed
  top: 50%
  left: 50%
  transform: translate(-50%, -50%)
  z-index: 999
  padding: 1.5rem 2.5rem
  border-radius: 12px
  font-size: 1.25rem
  font-weight: bold
  text-align: center
  opacity: 0
  pointer-events: none
  transition: opacity 0.3s ease-out
  
  // Responsive width constraints
  max-width: calc(100vw - 2rem)
  width: auto
  word-wrap: break-word
  overflow-wrap: break-word

  &.show
    opacity: 1
    animation: fadeInScale 0.3s ease-out

  &.success
    background: linear-gradient(135deg, rgba(76, 175, 80, 0.95) 0%, rgba(56, 142, 60, 0.95) 100%)
    color: white
    box-shadow: 0 8px 24px rgba(76, 175, 80, 0.4), 0 0 0 2px rgba(139, 195, 74, 0.3)

  &.error
    background: linear-gradient(135deg, rgba(244, 67, 54, 0.95) 0%, rgba(211, 47, 47, 0.95) 100%)
    color: white
    box-shadow: 0 8px 24px rgba(244, 67, 54, 0.4), 0 0 0 2px rgba(239, 83, 80, 0.3)

  &.info
    background: linear-gradient(135deg, rgba(33, 150, 243, 0.95) 0%, rgba(25, 118, 210, 0.95) 100%)
    color: white
    box-shadow: 0 8px 24px rgba(33, 150, 243, 0.4), 0 0 0 2px rgba(66, 165, 245, 0.3)

  &.warning
    background: linear-gradient(135deg, rgba(255, 152, 0, 0.95) 0%, rgba(245, 124, 0, 0.95) 100%)
    color: white
    box-shadow: 0 8px 24px rgba(255, 152, 0, 0.4), 0 0 0 2px rgba(255, 167, 38, 0.3)

// Mobile optimizations
@media (max-width: 767px)
  .display-message
    font-size: 1.25rem
    padding: 1rem 1.5rem
    max-width: calc(100vw - 1rem)

// =============================================================================
// SHARED BUTTON STYLES
// =============================================================================
button
  @include button-base
  @include active-scale

  &.selected
    background: $text-color
    color: $text-color-inverted

// =============================================================================
// SUBMIT PAGE
// =============================================================================
.submit-page
  overflow-y: auto
  background: $background-dark
  color: $text-color
  min-height: 100vh
  display: flex
  flex-direction: column
  align-items: center
  padding: 1rem

.submit-container
  width: 100%
  max-width: 80vw
  
.submit-title
  font-size: 1.5rem
  margin-bottom: 1rem
  text-align: center
  font-weight: bold

.submit-form
  display: flex
  flex-direction: column
  gap: 0.75rem

.search-wrapper
  position: relative
  width: 100%

.search-controls
  display: flex
  flex-wrap: wrap
  gap: 0.5rem
  width: 100%

.submit-input
  @include button-base
  flex: 1
  padding: 1rem
  font-size: 16px  // Prevents iOS zoom on focus

  &::placeholder
    color: $text-color-dimmed

  &:focus
    outline: none
    border-color: $border-color-hover
    background: $background-color-hover

  // Style the native clear button (X) for type="search"
  &::-webkit-search-cancel-button
    -webkit-appearance: none
    appearance: none
    height: 20px
    width: 20px
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3C/svg%3E")
    background-size: 20px 20px
    cursor: pointer
    opacity: 0.7

    &:hover
      opacity: 1

.submit-button
  @include button-base
  @include button-alt
  @include active-scale
  font-weight: bold
  padding: 1rem
  font-size: 1rem

  &:disabled
    opacity: 0.5
    cursor: not-allowed
    transform: none

// =============================================================================
// YOUTUBE SEARCH RESULTS
// =============================================================================
@keyframes fadeIn
  from
    opacity: 0
  to
    opacity: 1

.search-results-container
  margin-top: 1.5rem
  padding-bottom: 5rem
  animation: fadeIn 0.3s ease-out

  &.hidden
    display: none

.search-results-title
  font-size: 0.875rem
  color: $text-color-dimmed
  border-bottom: 1px solid $search-border
  margin-bottom: 0.75rem
  text-transform: uppercase
  letter-spacing: 0.05em

.search-results
  background: $search-bg
  border-radius: 4px 4px 0 0
  overflow: hidden
  overflow-y: auto

.search-result-item
  display: flex
  gap: 12px
  padding: 12px
  cursor: pointer
  transition: background-color 0.15s ease
  border-bottom: 1px solid $search-border

  &:last-child
    border-bottom: none

  &:hover
    background: $search-item-hover

  &.selected
    background: $search-item-selected

.result-thumbnail-wrapper
  position: relative
  width: 120px
  height: 68px
  flex-shrink: 0

.result-thumbnail
  width: 100%
  height: 100%
  object-fit: cover
  border-radius: $border-radius
  background: rgba(255, 255, 255, 0.05)

.playlist-video-count
  position: absolute
  bottom: 4px
  right: 4px
  background: rgba(0, 0, 0, 0.85)
  color: white
  font-size: 10px
  padding: 2px 6px
  border-radius: 3px
  font-weight: 600
  backdrop-filter: blur(4px)

.result-info
  flex: 1
  display: flex
  flex-direction: column
  justify-content: center
  min-width: 0

.result-title
  font-size: 14px
  font-weight: 500
  color: $text-color
  line-height: 1.4
  margin-bottom: 4px
  overflow: hidden
  text-overflow: ellipsis
  display: -webkit-box
  -webkit-line-clamp: 2
  -webkit-box-orient: vertical

.result-meta
  display: flex
  gap: 8px
  align-items: center
  font-size: 12px
  color: $text-color-dimmed
  flex-wrap: wrap

.result-author
  @include text-truncate
  max-width: 150px

.result-duration
  flex-shrink: 0
  padding: 2px 5px
  background: rgba(0, 0, 0, 0.6)
  border-radius: 3px
  font-size: 10px

.result-date
  flex-shrink: 0
  font-size: 10px
  color: $text-color-dimmed

// Search states
.search-loading,
.search-no-results,
.search-error
  padding: 16px
  text-align: center
  color: $text-color-dimmed
  font-size: 13px

.search-error
  color: $error-text

.search-button
  @include button-base
  @include button-alt
  @include active-scale
  padding: 1rem
  font-size: 1rem
  font-weight: bold
  white-space: nowrap

// =============================================================================
// SEARCH SECTION TITLES AND PLAYLIST BADGE
// =============================================================================
.search-section-title
  font-size: 0.75rem
  color: $text-color-dimmed
  margin: 1rem 0 0.5rem 0.75rem
  text-transform: uppercase
  letter-spacing: 0.05em
  font-weight: bold

.playlist-badge
  display: inline-block
  font-size: 0.75rem
  padding: 2px 6px
  background: rgba(255, 255, 255, 0.1)
  border-radius: 3px
  margin-right: 4px
  font-weight: normal
