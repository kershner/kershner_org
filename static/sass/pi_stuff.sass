// =============================================================================
// RESET & BASE
// =============================================================================
*
  margin: 0
  padding: 0
  box-sizing: border-box

html, body
  width: 100%
  height: 100%
  overflow: hidden
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif

// =============================================================================
// VARIABLES
// =============================================================================
// Colors - Base
$border-color: rgba(255, 255, 255, 0.3)
$border-color-hover: rgba(255, 255, 255, 0.6)
$background-color: rgba(255, 255, 255, 0.15)
$background-color-hover: rgba(255, 255, 255, 0.2)
$background-dark: rgba(0, 0, 0, 0.9)
$text-color: white
$text-color-inverted: black
$text-color-dimmed: rgba(255, 255, 255, 0.5)

// Colors - States
$success-bg: rgba(76, 175, 80, 0.2)
$success-border: rgba(76, 175, 80, 0.5)
$success-text: #81c784

$error-bg: rgba(244, 67, 54, 0.2)
$error-border: rgba(244, 67, 54, 0.5)
$error-text: #e57373

// Colors - Search specific
$search-bg: rgba(0, 0, 0, 0.95)
$search-border: rgba(255, 255, 255, 0.2)
$search-item-hover: rgba(255, 255, 255, 0.1)
$search-item-selected: rgba(255, 255, 255, 0.15)

// Spacing
$border-radius: 4px
$spacing-sm: 0.5rem
$spacing-md: 1rem
$spacing-lg: 1.5rem

// =============================================================================
// MIXINS
// =============================================================================
@mixin button-base
  padding: 1.5em
  font-size: 1em
  background: $background-color
  color: $text-color
  border: 1px solid $border-color
  border-radius: $border-radius
  cursor: pointer

@mixin active-scale
  &:active
    transform: scale(0.95)

@mixin flex-center
  display: flex
  justify-content: center
  align-items: center

@mixin text-truncate
  overflow: hidden
  text-overflow: ellipsis
  white-space: nowrap

// =============================================================================
// HOME PAGE - PLAYER & MENU
// =============================================================================
#player
  width: 100%
  height: 100%

.menu-button
  position: fixed
  top: 0
  left: 0
  width: 10em
  height: 10em
  background: transparent
  border: 0
  z-index: 2

.menu
  position: fixed
  z-index: 2
  inset: 0
  @include flex-center
  background: $background-dark

  &[hidden]
    display: none

.menu-inner
  display: flex
  flex-direction: column
  justify-content: space-between
  padding: $spacing-sm 0
  height: 100%
  width: 60rem

.menu-header,
.menu-footer
  flex: 0 0 auto

.menu-actions
  display: flex
  gap: $spacing-sm

  button
    flex: 1

.menu-categories
  display: flex
  flex: 1 1 auto
  gap: $spacing-sm
  padding: $spacing-sm 0
  overflow-x: auto
  
  button
    padding: 0.75rem 1rem
    font-weight: bold

.menu-content
  flex: 1 1 auto
  display: flex
  position: relative
  overflow-y: auto
  border-top: 2px solid $border-color
  min-height: 0

.menu-playlists
  display: flex
  flex-wrap: wrap
  align-items: flex-start
  align-content: flex-start
  gap: $spacing-sm
  padding: $spacing-sm 0
  overflow-y: auto
  flex: 1

  &[hidden]
    display: none

.menu-qr
  @include flex-center
  padding: $spacing-md
  flex: 1
  overflow: hidden
  min-height: 0

  &[hidden]
    display: none

.qr-box
  @include flex-center
  max-width: 100%
  max-height: 100%
  width: 100%
  height: 100%

.qr-img
  max-width: 100%
  max-height: 100%
  width: auto
  height: auto
  object-fit: contain
  border: 4px solid $border-color
  border-radius: 8px

.menu-footer
  padding-top: $spacing-sm

// Screen off state
body.screen-off
  background: black

  #player
    visibility: hidden

  &::before
    content: ''
    position: fixed
    inset: 0
    background: black
    z-index: 1
    pointer-events: none

// =============================================================================
// DISPLAY MESSAGE (for home page)
// =============================================================================
@keyframes fadeInScale
  from
    opacity: 0
    transform: translate(-50%, -50%) scale(0.9)
  to
    opacity: 1
    transform: translate(-50%, -50%) scale(1)

@keyframes fadeOutScale
  from
    opacity: 1
    transform: translate(-50%, -50%) scale(1)
  to
    opacity: 0
    transform: translate(-50%, -50%) scale(0.9)

.display-message
  position: fixed
  top: 50%
  left: 50%
  transform: translate(-50%, -50%)
  z-index: 3
  padding: 2rem 3rem
  border-radius: 8px
  font-size: 2.5rem
  font-weight: bold
  text-align: center
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3)
  opacity: 0
  pointer-events: none
  transition: opacity 0.3s ease
  
  // Responsive width constraints
  max-width: calc(100vw - 2rem)
  width: auto
  word-wrap: break-word
  overflow-wrap: break-word

  &.show
    opacity: 1
    animation: fadeInScale 0.3s ease-out

  &.success
    background: #4caf50
    color: white

  &.error
    background: #f44336
    color: white

  &.info
    background: #2196f3
    color: white

  &.warning
    background: #ff9800
    color: white

// Mobile optimizations
@media (max-width: 767px)
  .display-message
    font-size: 1.75rem
    padding: 1.5rem 2rem
    max-width: calc(100vw - 1rem)

// =============================================================================
// SHARED BUTTON STYLES
// =============================================================================
button
  @include button-base
  @include active-scale

  &.selected
    background: $text-color
    color: $text-color-inverted

// =============================================================================
// SUBMIT PAGE
// =============================================================================
.submit-page
  background: $background-dark
  color: $text-color
  min-height: 100vh
  display: flex
  flex-direction: column
  align-items: center
  padding: 2rem

.submit-container
  width: 100%
  max-width: 500px

.submit-title
  font-size: 2em
  margin-bottom: $spacing-lg
  text-align: center
  font-weight: bold

.submit-form
  display: flex
  flex-direction: column
  gap: $spacing-sm

.search-wrapper
  position: relative
  width: 100%

.submit-input
  @include button-base
  width: 100%

  &::placeholder
    color: $text-color-dimmed

  &:focus
    outline: none
    border-color: $border-color-hover
    background: $background-color-hover

.submit-button
  @include button-base
  @include active-scale
  font-weight: bold

  &:disabled
    opacity: 0.5
    cursor: not-allowed
    transform: none

// =============================================================================
// YOUTUBE SEARCH DROPDOWN
// =============================================================================
@keyframes slideDown
  from
    opacity: 0
    transform: translateY(-8px)
  to
    opacity: 1
    transform: translateY(0)

.autocomplete-dropdown
  position: absolute
  top: 100%
  left: 0
  right: 0
  margin-top: 4px
  background: $search-bg
  border: 1px solid $search-border
  border-radius: $border-radius
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5)
  max-height: 480px
  overflow-y: auto
  z-index: 1000
  animation: slideDown 0.15s ease-out
  backdrop-filter: blur(10px)

  &.hidden
    display: none

  // Custom scrollbar
  &::-webkit-scrollbar
    width: 8px

  &::-webkit-scrollbar-track
    background: rgba(255, 255, 255, 0.05)
    border-radius: 0 $border-radius $border-radius 0

  &::-webkit-scrollbar-thumb
    background: rgba(255, 255, 255, 0.2)
    border-radius: $border-radius

    &:hover
      background: rgba(255, 255, 255, 0.3)

.search-result-item
  display: flex
  gap: 12px
  padding: 12px
  cursor: pointer
  transition: background-color 0.15s ease
  border-bottom: 1px solid $search-border

  &:last-child
    border-bottom: none

  &:hover
    background: $search-item-hover

  &.selected
    background: $search-item-selected

.result-thumbnail
  width: 120px
  height: 68px
  object-fit: cover
  border-radius: $border-radius
  flex-shrink: 0
  background: rgba(255, 255, 255, 0.05)

.result-info
  flex: 1
  display: flex
  flex-direction: column
  justify-content: center
  min-width: 0

.result-title
  font-size: 14px
  font-weight: 500
  color: $text-color
  line-height: 1.3
  margin-bottom: 4px
  overflow: hidden
  text-overflow: ellipsis
  display: -webkit-box
  -webkit-line-clamp: 2
  -webkit-box-orient: vertical

.result-meta
  display: flex
  gap: 8px
  align-items: center
  font-size: 12px
  color: $text-color-dimmed

.result-author
  @include text-truncate

.result-duration
  flex-shrink: 0
  padding: 2px 6px
  background: rgba(0, 0, 0, 0.6)
  border-radius: 3px
  font-size: 11px

// Search states
.search-loading,
.search-no-results,
.search-error
  padding: 24px
  text-align: center
  color: $text-color-dimmed
  font-size: 14px

.search-error
  color: $error-text

// =============================================================================
// RESPONSIVE
// =============================================================================
@media (max-width: 768px)
  .autocomplete-dropdown
    max-height: 360px
  
  .search-result-item
    padding: 10px
    gap: 10px
  
  .result-thumbnail
    width: 100px
    height: 56px
  
  .result-title
    font-size: 13px
  
  .result-meta
    font-size: 11px
